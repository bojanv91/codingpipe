<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>ASP.NET MVC5 Feature Folders Structure</title>
		<meta name="description" content="Random thoughts about programming and software development">

		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"></link>
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"></link>
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"></link>
		<link rel="manifest" href="/site.webmanifest"></link>
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="CodingPipe.com">
		<link rel="alternate" href="/feed/feed.json" type="application/json" title="CodingPipe.com">
		<meta name="generator" content="Eleventy v3.1.0">
		
		<style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
* { box-sizing: border-box; }
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;
	--background-color: #fff;
	--text-color: var(--color-gray-90);
	--text-color-link: #082840;
	--text-color-link-active: #5f2b48;
	--text-color-link-visited: #17050F;
	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;
		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;
		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}

html {
	overflow-y: scroll;
}

body {
	max-width: 45em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

p:last-child {
	margin-bottom: 0;
}

p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}

	a[href]:visited {
		color: var(--text-color-link-visited);
	}

	a[href]:hover,
	a[href]:active {
		color: var(--text-color-link-active);
	}

main {
	padding: 1rem;
}

	main :first-child {
		margin-top: 0;
	}

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

	header:after {
		content: "";
		display: table;
		clear: both;
	}

.links-nextprev {
	list-style: none;
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}

table {
	margin: 1em 0;
}

	table td,
	table th {
		padding-right: 1em;
	}

pre,
code {
	font-family: var(--font-family-monospace);
	font-size: 0.92em !important;
	line-height: 1.3 !important;
}

	pre:not([class*="language-"]) {
		margin: .5em 0;
		line-height: 1.3;
		-moz-tab-size: var(--syntax-tab-size);
		-o-tab-size: var(--syntax-tab-size);
		tab-size: var(--syntax-tab-size);
		-webkit-hyphens: none;
		-ms-hyphens: none;
		hyphens: none;
		direction: ltr;
		text-align: left;
		white-space: pre;
		word-spacing: normal;
		word-break: normal;
		padding: 0.5em 0.8em;
		border-radius: 4px;
	}

code {
	word-break: break-all;
	padding: 0.1em 0.3em;
	border-radius: 3px;
}

/* Header */
header {
	display: flex;
	gap: 1em .5em;
	flex-wrap: wrap;
	align-items: center;
	padding: 1em;
}

.home-link {
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
	margin-right: 2em;
}

	.home-link:link:not(:hover) {
		text-decoration: none;
	}

/* Nav */
.nav {
	display: flex;
	padding: 0;
	margin: 0;
	list-style: none;
}

.nav-item {
	display: inline-block;
	margin-right: 1em;
}

	.nav-item a[href]:not(:hover) {
		text-decoration: none;
	}

.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	/*list-style: none;*/
	padding: 0;
	/*padding-left: 1.5rem;*/
}

.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	/*counter-increment: start-from -1;*/
	margin-bottom: 1em;
}

	.postlist-item:before {
		/*display: inline-block;
	pointer-events: none;
	content: "" counter(start-from, decimal-leading-zero) ". ";
		line-height: 100%;
		text-align: right;
		margin-left: -1.5rem;*/
	}

	.postlist-date,
	.postlist-item:before {
		font-size: 0.8125em; /* 13px /16 */
		color: var(--color-gray-90);
	}

.postlist-date {
	word-spacing: -0.5px;
	margin-left: auto; /* Push date to the most right position */
	color: var(--color-gray-50);
}

.postlist-link {
	text-decoration: none; /* don't underline the links here */
	font-size: 1em; /*1.1875em;*/ /* 19px /16 */
	font-weight: 400; /* 700 */
	/*flex-basis: calc(100% - 1.5rem);
	padding-left: .25em;
	padding-right: .5em;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;*/
}

	.postlist-link:focus,
	.postlist-link:hover {
		text-decoration: underline;
	}

.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	/*text-transform: capitalize;*/
	/*font-style: italic;*/
	text-decoration: none;
}

	.post-tag:focus,
	.post-tag:hover {
		text-decoration: underline;
	}

.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
	color: var(--color-gray-50);
}

	.post-metadata time {
		/*margin-right: 1em;*/
	}

	.post-metadata .post-tag {
		color: inherit;
	}

/* Direct Links / Markdown Headers */
.header-anchor {
	text-decoration: none;
	font-style: normal;
	font-size: 1em;
	margin-left: .1em;
}

a[href].header-anchor,
a[href].header-anchor:visited {
	color: transparent;
}

	a[href].header-anchor:focus,
	a[href].header-anchor:hover {
		text-decoration: underline;
	}

	a[href].header-anchor:focus,
	:hover > a[href].header-anchor {
		color: #aaa;
	}

h2 + .header-anchor {
	font-size: 1.5em;
}

/*
		***************
		Custom
		***************
*/

h1 {
	margin-bottom: 0;
}</style>
	</head>
	<body>
		<a href="#skip" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">CodingPipe.com</a>
			<nav>
				<h2 class="visually-hidden">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/links/">Favorite Links</a></li>
					<li class="nav-item"><a href="/tags/">Tags</a></li>
				</ul>
			</nav>
		</header>

		<main id="skip">
			
<h1>ASP.NET MVC5 Feature Folders Structure</h1>

<ul class="post-metadata">
	<li><time datetime="2016-05-27">May 27, 2016</time></li>
	<li><span> • </span></li>
	<li><span>5 min read</span></li>
	<li><span> • </span></li>
		<li><a href="/tags/software-design/" class="post-tag">Software Design</a></li>
</ul>

<p>Structuring your files around <strong>business concerns</strong> is more natural way of handling projects than structuring them around <strong>technical concerns</strong>. The <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">Separation of Concerns</a> is applied in both approaches, but not both of them give the same desired clarity and ease for developers. This blogpost focuses on organizing MVC projects around <strong>feature folders</strong>, which represent the business concerns.<!--excerpt--></p>
<p>Most of the time developers make modifications related to a single feature (e.g. adding new fields, changing business rules, adding validation...). Structuring folders around interrelated files can make modification process simpler. The common MVC folder structure violates the rule of <em>&quot;Files that change together should be structured together&quot;</em>. Structuring by business concerns embraces this very important rule.</p>
<blockquote>
<p>Files that change together should be structured together.</p>
</blockquote>
<h2 id="horizontal-technical-vs-vertical-business-folder-structure" tabindex="-1">Horizontal (Technical) vs. Vertical (Business) Folder Structure <a class="header-anchor" href="#horizontal-technical-vs-vertical-business-folder-structure">#</a></h2>
<p>On the left side you can see the common MVC structure. On the right side you can see the feature folders structure of the very same project.</p>
<pre class="language-plaintext" tabindex="0"><code class="language-plaintext">    Styles
        Shared.css
        Login.css
    Scripts
        Login.js
    Controllers
        CoursesController.cs
        DepartmentsController.cs
        EnrollmentsController.cs
        InstructorsController.cs
        StudentsController.cs
        UsersController.cs
    Models  
        CourseEditModel.cs
        CourseIndexModel.cs
        DepartmentEditModel.cs
        DepartmentIndexModel.cs
        EnrollmentEditModel.cs
        EnrollmentIndexModel.cs
        InstructorEditModel.cs
        InstructorIndexModel.cs
        StudentEditModel.cs
        StudentIndexModel.cs
        UserLoginModel.cs
        UserRegisterModel.cs
        UserForgotPasswordModel.cs
    Views
        Courses
            Edit.cshtml
            Index.cshtml
        Departments
            Edit.cshtml
            Index.cshtml
        Enrollments
            Edit.cshtml
            Index.cshtml
        Instructors
            Edit.cshtml
            Index.cshtml
        Shared
            _Layout.cshtml
        Students
            Edit.cshtml
            Index.cshtml
        Users
            ForgotPassword.cshtml
            Login.cshtml
            Register.cshtml
    _ViewStart.cshtml</code></pre>
<div style=""></div>
<pre class="language-plaintext" tabindex="0"><code class="language-plaintext">    Features
        Courses
            CoursesController.cs
            Edit.cs
            Edit.cshtml
            Index.cs
            Index.cshtml
        Departments
            DepartmentsController.cs
            Edit.cs
            Edit.cshtml
            Index.cs
            Index.cshtml
        Enrollments
            EnrollmentsController.cs
            Edit.cs
            Edit.cshtml
            Index.cs
            Index.cshtml
        Instructors
            InstructorsController.cs
            Edit.cs
            Edit.cshtml
            Index.cs
            Index.cshtml
        Shared
            _Layout.cshtml
            Shared.css
        Students
            StudentsController.cs
            Edit.cs
            Edit.cshtml
            Index.cs
            Index.cshtml
        Users
            UsersController.cs
            ForgotPassword.cs
            ForgotPassword.cshtml
            Login.cs
            Login.cshtml
            Login.css
            Login.js
            Register.cs
            Register.cshtml
    _ViewStart.cshtml</code></pre>
<p>When you see this in your IDE (e.g. in Visual Studio), the distinction between the files is even greater, given that there is accompanied file type icon shown besides the filename.</p>
<p>Now, imagine you scale in amount of features, in addition to the standard N-Layer stuff like repositories, services, handlers, DTOs, etc... You will soon notice that things are starting to get messy in the technical folders organization. In the feature folders organization, each feature can scale on it's own, thus much easier to manage.</p>
<p>Food for thought:</p>
<ul>
<li>What if we put our CSS and JavaScript files also in these feature folders?</li>
<li>What if one feature folder becomes so demanding on the UI that needs to be a full SPA view/module - can we structure it to use Angular?</li>
<li>Can we develop one feature UI in Angular, another one in React, all other in classic server-side MVC, and stay sane with our overall project structure?</li>
</ul>
<p>Example of single feature evolved as Angular application/module:</p>
<pre class="language-plaintext" tabindex="0"><code class="language-plaintext">    Features
        ...
        ShoppingCart
            Components
                CartComponent.js
                CartComponent.css
                PaymentComponent.js
                PaymentComponent.css
                CartContainer.js
            App.js
            App.css
            Index.cshtml
            ShoppingCartController.cs
        ...</code></pre>
<h2 id="benefits-of-using-feature-folders-over-technical-folder-structure" tabindex="-1">Benefits of using Feature Folders (over technical folder structure) <a class="header-anchor" href="#benefits-of-using-feature-folders-over-technical-folder-structure">#</a></h2>
<p>Structuring your files by features (business concerns) makes things easier to find and manage.</p>
<ul>
<li>Time spent on navigation through Solution Explorer to locate interdependent files is drastically reduced since they are all in a single folder.</li>
<li>You don't step over each other toes with your peers, thus, avoid spending time on fixing merge conflicts.</li>
<li>You can scale and modify each feature on its own, independently from other features and even use different UI technology.</li>
<li>You immediately understand what an application does and where to find necessary files for your given requirement.</li>
<li>You can easily reuse similar features across projects by simply copying just a single folder.</li>
<li>You can reason much easier about each feature just by looking in a single (feature) folder.</li>
</ul>
<h2 id="implementing-feature-folders-in-asp-net-mvc-5" tabindex="-1">Implementing Feature Folders in ASP.NET MVC 5 <a class="header-anchor" href="#implementing-feature-folders-in-asp-net-mvc-5">#</a></h2>
<p>To make this work in ASP.NET MVC 5, we should inherit the <code>RazorViewEngine</code> and change the view location parts to ones that fit our new structure.</p>
<pre class="language-csharp" tabindex="0"><code class="language-csharp">    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeatureFoldersRazorViewEngine</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RazorViewEngine</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token function">FeatureFoldersRazorViewEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> featureFolderViewLocationFormats <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token punctuation">{</span>
                <span class="token string">"~/Features/{1}/{0}.cshtml"</span><span class="token punctuation">,</span>
                <span class="token string">"~/Features/{1}/{0}.vbhtml"</span><span class="token punctuation">,</span>
                <span class="token string">"~/Features/Shared/{0}.cshtml"</span><span class="token punctuation">,</span>
                <span class="token string">"~/Features/Shared/{0}.vbhtml"</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            ViewLocationFormats <span class="token operator">=</span> featureFolderViewLocationFormats<span class="token punctuation">;</span>
            MasterLocationFormats <span class="token operator">=</span> featureFolderViewLocationFormats<span class="token punctuation">;</span>
            PartialViewLocationFormats <span class="token operator">=</span> featureFolderViewLocationFormats<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></code></pre>
<p>Next, we have to add our newly created <code>FeatureFoldersRazorViewEngine</code> in our application.</p>
<pre class="language-csharp" tabindex="0"><code class="language-csharp">    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Global</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">HttpApplication</span></span>
    <span class="token punctuation">{</span>
        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Application_Start</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            ViewEngines<span class="token punctuation">.</span>Engines<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ViewEngines<span class="token punctuation">.</span>Engines<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">FeatureFoldersRazorViewEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></code></pre>
<h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary">#</a></h2>
<p>Structuring our MVC projects following feature folders approach increases the productivity of our dev teams.</p>
<p>At our company, we have been using feature folders project structure on over dozens projects for over a year, and due to the high success and productivity boost, it became our default project structure on the presentation layer.</p>

<ul class="links-nextprev"><li>Previous: <a href="/posts/towards-good-enough-code-re-factoring-business-rule-check-specification-pattern/">How to Refactor Business Rules Using the Specification Pattern</a></li><li>Next: <a href="/posts/global-day-of-coderetreat-2016-haselt-macedonia/">Global Day of Coderetreat 2016 Skopje Event Recap</a></li>
</ul>

		</main>

		<footer></footer>

		<!-- This page `/posts/feature-folders-structure-in-asp-net/` was built on 2025-05-27T16:28:32.094Z -->

		<!-- Google tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-V8XNG7PNDG"></script>
		<script>
			if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
    			console.log('Running on localhost, skipping Google Analytics.');
			} else {
				window.dataLayer = window.dataLayer || [];
				function gtag(){dataLayer.push(arguments);}
				gtag('js', new Date());

				gtag('config', 'G-V8XNG7PNDG');
			}
		</script>
	</body>
</html>
